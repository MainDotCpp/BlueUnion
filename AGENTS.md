# BlueUnion Repository - AI Agent Guidelines

This file outlines the technical standards, commands, and patterns for AI agents working in the BlueUnion monorepo.

## 1. Environment & Architecture

### Context

- **Project**: BlueUnion (Cross-border digital marketing & card platform)
- **Structure**: Monorepo using `pnpm` workspaces
- **Package Manager**: `pnpm` (Core requirement)

### Applications

1. **Website (`apps/website`)** - _PRIMARY FOCUS_
   - Framework: Next.js 15 (App Router)
   - Language: TypeScript
   - Styling: Tailwind CSS + shadcn/ui
   - I18n: `next-intl` (English/Chinese)
   - State/Animation: GSAP, Lenis
   - Database: Prisma (PostgreSQL)

2. **Admin (`apps/admin`)**
   - Framework: Refine.dev
   - UI: Ant Design

3. **API (`apps/api`)**
   - Framework: Nest.js

## 2. Operational Commands

### Global

- **Install Dependencies**: `pnpm install`
- **Development Server**: `pnpm dev` (Runs all apps in parallel)
- **Build Production**: `pnpm build`
- **Linting**: `pnpm lint`
- **Type Checking**: `pnpm typecheck`

### Website Specific (`apps/website`)

- **Start Dev**: `pnpm dev:website` (or `cd apps/website && pnpm dev`)
- **Build**: `pnpm build:website`
- **Lint**: `cd apps/website && pnpm lint`
- **Typecheck**: `cd apps/website && tsc --noEmit`
- **Database Studio**: `cd apps/website && pnpm prisma studio`
- **Database Push**: `cd apps/website && pnpm prisma db push`

## 3. Code Standards & Patterns

### TypeScript Guidelines

- **Strict Mode**: Enabled. Do not use `any` types.
- **Interfaces**: Use `interface` for object definitions and component props.
- **Types**: Use `type` for unions, intersections, and primitives.
- **Exports**: Use named exports for components and utilities.
- **Async/Await**: Prefer async/await over raw Promises.

### React & Next.js Patterns (App Router)

- **Server vs Client**:
  - Default to **Server Components**.
  - Add `"use client"` at the very top of files only when using hooks (`useState`, `useEffect`) or event listeners.
- **File Structure**:
  - `page.tsx`: Route UI
  - `layout.tsx`: Layout wrapper
  - `loading.tsx`: Suspense fallback
  - `error.tsx`: Error boundary
- **Routing**: Use `app/[locale]/...` for i18n routes.

### UI & Styling (Tailwind + shadcn/ui)

- **Utility First**: Use Tailwind utility classes. Avoid custom CSS files unless necessary.
- **Conditional Classes**: MUST use `cn()` utility from `@/lib/utils` (combines `clsx` and `tailwind-merge`).
  ```tsx
  // âœ… Correct
  import { cn } from '@/lib/utils';
  <div className={cn('flex h-10 w-full rounded-md', className)} />;
  ```
- **Component Location**:
  - `components/ui/`: Atomic, reusable primitives (Button, Input). Do not modify logic heavily here.
  - `components/layout/`: Header, Footer, Sidebar.
  - `components/home/`, `components/dashboard/`: Feature-specific components.

### Internationalization (next-intl)

- **Usage**:

  ```tsx
  import { useTranslations } from 'next-intl';

  export function Welcome() {
    const t = useTranslations('HomePage'); // Namespace matches json file keys
    return <h1>{t('title')}</h1>;
  }
  ```

- **Messages**: Stored in `apps/website/i18n/messages/{en,zh}.json`.

## 4. Development Workflow

### Creating Components

1. **Interface**: Define `Props` interface exported with component.
2. **Implementation**: Functional component.
3. **Styling**: Tailwind classes via `className` prop + `cn()`.

### Error Handling

- Use Next.js `error.tsx` for route-level errors.
- Use `try/catch` in Server Actions or API routes.
- Log errors appropriately (console.error in dev).

### Refactoring & Maintenance

- **Imports**: Organize imports:
  1. Built-in (react, next)
  2. Third-party (lucide-react, gsap)
  3. Internal Aliases (@/components, @/lib)
  4. Relative (./)
- **Formatting**: Rely on Prettier configuration.

## 5. Important Configuration Files

- `apps/website/next.config.ts`: Next.js config
- `apps/website/tailwind.config.js`: Tailwind theme & plugins
- `apps/website/tsconfig.json`: TypeScript paths & compiler options
- `apps/website/_middleware.ts`: Locale routing logic

---

_Generated by Sisyphus for BlueUnion Agentic Workflow_
